{{ define "title" }}
  Index &vert;
  {{ .Site.Title }}
{{ end }}
{{ define "main" }}
  <main>
    <header><h2>Index</h2></header>
    <section>
      <header>
        <h3>Topics</h3>
        <p>These are the limited set of topics used to classify articles.</p>
      </header>
      <main>
        <div class="tagcloud">
          {{ if ne (len $.Site.Taxonomies.topics) 0 }}
            {{ $largestFontSize := 1.4 }}
            {{ $smallestFontSize := 0.75 }}
            {{ $fontSpread := sub $largestFontSize $smallestFontSize }}
            {{ $max := add (len (index $.Site.Taxonomies.topics.ByCount 0).Pages) 1 }}
            {{ $min := len (index $.Site.Taxonomies.topics.ByCount.Reverse 0).Pages }}
            {{ $spread := sub $max $min }}
            {{ $fontStep := div $fontSpread $spread }}
            {{ range $name, $taxonomy := $.Site.Taxonomies.topics }}
              {{ $tagCount := len $taxonomy.Pages }}
              {{ $currentFontSize := (add $smallestFontSize (mul (sub $tagCount $min) $fontStep) ) }}
              {{ $weigth := div (sub (math.Log $tagCount) (math.Log $min)) (sub (math.Log $max) (math.Log $min)) }}
              {{ $currentFontSize := (add $smallestFontSize (mul (sub $largestFontSize $smallestFontSize) $weigth)) }}
              <a
                href="{{ "/topics/" | relURL }}{{ $name | urlize }}/"
                class="tagcloud-item"
                style="font-size: {{ $currentFontSize }}rem;"
              >
                {{ $name }}<sup>{{ $tagCount }}</sup>
              </a>
            {{ end }}
          {{ end }}
        </div>
      </main>
    </section>
    <section>
      <header>
        <h3>Terms</h3>
        <p>
          These are an unlimited, and comprehensive, set of tags used to
          classify articles, notes, and other pages.
        </p>
      </header>
      <main>
        <div class="tagcloud">
          {{ if ne (len $.Site.Taxonomies.terms) 0 }}
            {{ $largestFontSize := 1.4 }}
            {{ $smallestFontSize := 0.75 }}
            {{ $fontSpread := sub $largestFontSize $smallestFontSize }}
            {{ $max := add (len (index $.Site.Taxonomies.terms.ByCount 0).Pages) 1 }}
            {{ $min := len (index $.Site.Taxonomies.terms.ByCount.Reverse 0).Pages }}
            {{ $spread := sub $max $min }}
            {{ $fontStep := div $fontSpread $spread }}
            {{ range $name, $taxonomy := $.Site.Taxonomies.terms }}
              {{ $tagCount := len $taxonomy.Pages }}
              {{ $currentFontSize := (add $smallestFontSize (mul (sub $tagCount $min) $fontStep) ) }}
              {{ $weigth := div (sub (math.Log $tagCount) (math.Log $min)) (sub (math.Log $max) (math.Log $min)) }}
              {{ $currentFontSize := (add $smallestFontSize (mul (sub $largestFontSize $smallestFontSize) $weigth)) }}
              <a
                href="{{ "/terms/" | relURL }}{{ $name | urlize }}/"
                class="tagcloud-item"
                style="font-size: {{ $currentFontSize }}rem;"
              >
                {{ $name }}<sup>{{ $tagCount }}</sup>
              </a>
            {{ end }}
          {{ end }}
        </div>
      </main>
    </section>
  </main>
{{ end }}
{{ define "footer" }}
  <hr />
  <nav>
    <a href="/topics/">Index</a> &vert;
    <a
      target="_blank"
      href="https://www.google.com/search?q=site%3Amarkpaulayers.com"
      >Search</a
    >
  </nav>
  <p><a href="/">&hellip;</a></p>
  <p>
    <a property="dct:title" rel="cc:attributionURL" href="{{ .RelPermalink }}"
      >{{ .Site.Title }}</a
    >
    is &copy;{{ now.Format "2006" }} by
    <a
      property="cc:attributionName"
      rel="cc:attributionURL dct:creator"
      href="/about/"
      >Mark Ayers</a
    >
    and is licensed to you
    <a
      target="_blank"
      rel="license noopener noreferrer"
      style="display: inline-block"
      href="http://creativecommons.org/licenses/by/4.0/"
      >CC BY 4.0</a
    >.<br />Exceptions have a seperate attribution and license statement.
  </p>
{{ end }}
